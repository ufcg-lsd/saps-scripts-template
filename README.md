# SAPS development tutorial
This tutorial explains how to develop new algorithms for the Sebal Automated Processing Service (SAPS). The SAPS calculates evapotranspiration in a pipeline with three phases: 1) **Input Download**; 2) **Preprocessing**, and 3) **Processing**.
 
In the first phase, **Input Download**, the Landsat satellite imagery is downloaded to the SAPS processing infrastructure. Any other data, including meteorological information, used in the next steps, are downloaded by the algorithms implemented in this first phase.
 
In the second phase, **Preprocessing**, the dataset downloaded in the first phase can be treated before the processing phase. Typical treatment includes checking if the data is adequate to the next phase (e.g. not entirely covered by clouds and shadows) or any data transformation.
 
Finally, in the **Processing** phase, the evapotranspiration is calculated based on the data generated by the previous phases.
  
SAPS supports multiple algorithms to any of these phases. There is no restriction on internal design aspects of the implementation of these algorithms, including the programming language of choice. A new proposed algorithm must address two simple requirements. First, be able to be packaged as a Docker image. Second, to be called by a bash script, which specifies the allowed arguments by the SAPS execution pipeline. In addition to these requirements, any new implementation should respect a contract on where to find data generated by the previous steps as well as where to store the output to make it available to the next steps.

We detail the specification of the contract for each phase of the SAPS pipeline: [inputdownload contract](inputdownload/README.md), [preprocessing contract](preprocessing/README.md) and [processing contract](processing/README.md). In addition to these specifications, we also provide blueprint implementations of the bash scripts that should wrap the execution of any new implementation: [inputdownload blueprint](inputdownload/run.sh), [preprocessing blueprint](preprocessing/run.sh) and [processing blueprint](processing/run.sh)).

Further information regarding the implementation of new algorithms can be gathered from the repositories mantained by the Federal University of Campina Grande (UFCG) for its SAPS deploy. UFCG maintains a repository for each phase of the SAPS pipeline (listed below). Each new suppported algorithm is kept as a branch of one of these repositories.

- [UFCG Inputdownload repository](https://github.com/ufcg-lsd/saps-scripts-inputdownload)
- [UFCG Preprocessing repository](https://github.com/ufcg-lsd/saps-scripts-preprocessing)
- [UFCG Processing repository](https://github.com/ufcg-lsd/saps-scripts-processing)
